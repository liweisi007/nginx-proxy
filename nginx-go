#!/bin/bash

while true; do
  clear
  echo "===================================="
  echo "        Nginx 管理菜单"
  echo "===================================="
  echo " 1) 查看 Nginx 状态"
  echo " 2) 启动 Nginx"
  echo " 3) 停止 Nginx"
  echo " 4) 重启 Nginx"
  echo " 5) 测试 Nginx 配置"
  echo " 6) 反向代理管理"
  echo " 7) 一键启用 HTTPS"
  echo " 8) 查看错误日志"
  echo " 9) 卸载 nginx-proxy"
  echo " 0) 退出"
  echo "===================================="
  read -p "请输入选项: " choice

  case "$choice" in
    1) ps aux | grep '[n]ginx' ;;
    2) pgrep nginx >/dev/null && echo "已运行" || nginx ;;
    3) nginx -s quit || true ;;
    4) nginx -s reload || nginx ;;
    5) nginx -t ;;
    6)
      echo "1) 新增反代  2) 删除反代"
      read sub
      [ "$sub" = "1" ] && nginx-proxy add
      [ "$sub" = "2" ] && nginx-proxy del
      ;;
    7) nginx-proxy https ;;
    8) tail -n 50 /var/log/nginx/error.log ;;
    9)
      read -p "输入 yes 确认卸载: " c
      [ "$c" = "yes" ] && nginx-proxy uninstall
      ;;
    0) exit 0 ;;
  esac

  read -p "按回车继续..."
done
